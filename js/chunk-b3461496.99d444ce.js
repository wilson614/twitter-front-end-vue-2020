(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3461496"],{"31d3":function(e,t,a){},6718:function(e,t,a){e.exports=a.p+"img/reply-lg.3004ae28.svg"},"7d7e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"tweets"}},[a("div",{staticClass:"navbar"},[a("NavBars",{attrs:{page:"normal"}})],1),a("div",{staticClass:"tweets-center"},[a("NavTabs",{attrs:{plainText:"推文",isbackArrow:!0}}),a("div",{staticClass:"tweets-center-tweet"},[a("TweetDetail",{attrs:{tweet:e.tweet},on:{handleaddLiked:e.handleaddLiked}})],1),a("div",{staticClass:"tweets-center-tweets"},[a("TweetReply",{attrs:{replies:e.replies}})],1)],1),a("div",{staticClass:"tweets-right"},[a("Popular")],1)])},r=[],i=a("1da1"),n=a("5530"),c=(a("96cf"),a("0baf")),l=a("8bb1"),o=a("3b8f"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return 0!==Object.keys(e.tweet).length?s("div",{attrs:{id:"tweetdetail"}},[s("div",{staticClass:"tweet-header"},[s("router-link",{attrs:{to:{name:"profile",params:{userid:e.tweet.UserId}}}},[s("img",{attrs:{src:e.tweet.User.avatar,alt:"avatar"}})]),s("div",{staticClass:"user-detail"},[s("router-link",{attrs:{to:{name:"profile",params:{userid:e.tweet.UserId}}}},[s("span",{staticClass:"user-name"},[e._v(e._s(e.tweet.User.name))])]),s("router-link",{attrs:{to:{name:"profile",params:{userid:e.tweet.UserId}}}},[s("span",{staticClass:"user-account"},[e._v(e._s("@"+e.tweet.User.account))])])],1)],1),s("div",{staticClass:"tweet-text"},[e._v(" "+e._s(e.tweet.description)+" ")]),s("div",{staticClass:"tweet-detail"},[s("span",[e._v(" "+e._s(e.isToday(e.tweet.createdAt)?e.fromNow(e.utcOffset(e.tweet.createdAt)):e.timeFormat(e.utcOffset(e.tweet.createdAt),"A hh:MM•YYYY年MM月DD日"))+" ")])]),s("div",{staticClass:"tweet-text-detail"},[s("span",{staticClass:"reply"},[s("span",{staticClass:"reply-count"},[e._v(e._s(e.tweet.replyCount))]),e._v(" 回覆")]),s("span",{staticClass:"like"},[s("span",{staticClass:"like-count"},[e._v(e._s(e.tweet.likeCount))]),e._v(" 喜歡次數")])]),s("div",{staticClass:"btn btn-control"},[s("div",{staticClass:"btn-reply cursor-pointer",on:{click:e.showtweetReplyModal}},[s("img",{staticClass:"reply-icon",attrs:{src:a("6718")}})]),s("div",{staticClass:"btn-like cursor-pointer",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleLike(e.tweet.isLiked,e.tweet.id)}}},[s("TweetLke",{staticClass:"like-icon",attrs:{isActive:e.tweet.isLiked}})],1)]),e.isShowModal?s("TweetReplyModal",{attrs:{tweet:e.replyData},on:{close:e.modalClose,submit:e.replySubmit}}):e._e()],1):e._e()},u=[];a("a4d3"),a("b64b");function p(e,t){if(null==e)return{};var a,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||(r[a]=e[a]);return r}function w(e,t){if(null==e)return{};var a,s,r=p(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}a("b0c0");var f=a("2708"),v=a("811a"),h=a("ca16"),m=a("6783"),b=a("2fa3"),k=["User"],y={mixins:[f["b"]],components:{TweetReplyModal:v["a"],TweetLke:h["a"]},data:function(){return{isShowModal:!1}},props:{tweet:{type:Object,required:!0}},computed:{replyData:function(){if(0===Object.keys(this.tweet).length)return{};var e=this.tweet,t=e.User,a=w(e,k);return Object(n["a"])({name:t.name,account:t.account,avatar:t.avatar},a)}},methods:{showtweetReplyModal:function(){this.isShowModal=!0},modalClose:function(){this.isShowModal=!1},handleLike:function(e,t){this.handleaddLiked(e,t),this.addLiked(e,t)},addLiked:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,!e){a.next=6;break}return a.next=4,m["a"].deleteLiked(t);case 4:a.next=8;break;case 6:return a.next=8,m["a"].addLiked(t);case 8:a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),s=e?"無法對推文按不喜歡，請稍後再試":"無法對推文按喜歡，請稍後再試",b["a"].fire({icon:"error",title:s});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},handleaddLiked:function(e){this.$emit("handleaddLiked",{isLiked:!e})}}},C=y,_=(a("8ff9"),a("2877")),O=Object(_["a"])(C,d,u,!1,null,"8b00e58a",null),x=O.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.replies,(function(t){return a("div",{key:t.id,staticClass:"tweet-reply",attrs:{id:"tweet-reply-"+t.id}},[a("router-link",{attrs:{to:{name:"profile",params:{userid:t.User.id}}}},[a("img",{attrs:{src:t.User.avatar,alt:"avatar"}})]),a("div",{staticClass:"reply-content"},[a("div",{staticClass:"user-details"},[a("router-link",{attrs:{to:{name:"profile",params:{userid:t.User.id}}}},[a("span",{staticClass:"user-name"},[e._v(e._s(t.User.name))])]),a("span",{staticClass:"user-detail"},[e._v(" "+e._s(t.User.account)+"•"+e._s(e.isToday(t.createdAt)?e.fromNow(e.utcOffset(t.createdAt)):e.timeFormat(e.utcOffset(t.createdAt),"MM月DD日"))+" ")])],1),a("div",{staticClass:"reply"},[a("span",[e._v("回覆 ")]),a("router-link",{staticClass:"reply-tweet-account",attrs:{to:{name:"profile",params:{userid:t.Tweet.User.id}}}},[e._v(e._s("@"+t.Tweet.User.account))]),a("div",{staticClass:"reply-text"},[e._v(e._s(t.comment))])],1)])],1)})),0)},g=[],R={mixins:[f["b"]],props:{replies:{type:Array,required:!0}}},j=R,L=(a("e82f"),Object(_["a"])(j,T,g,!1,null,"d93045ac",null)),U=L.exports,M=a("2f62"),A={components:{NavBars:c["a"],NavTabs:l["a"],Popular:o["a"],TweetDetail:x,TweetReply:U},data:function(){return{tweet:{},replies:[]}},created:function(){this.fetchReplies(this.$route.params.id),this.fetchTweet(this.$route.params.id)},watch:{isTweetNeedReload:function(){this.isTweetNeedReload&&(this.fetchReplies(this.$route.params.id),this.fetchTweet(this.$route.params.id),this.handleTweetsReload(!1))}},computed:Object(n["a"])({},Object(M["c"])({isTweetNeedReload:"isTweetNeedReload"})),methods:Object(n["a"])(Object(n["a"])({},Object(M["b"])(["handleTweetsReload"])),{},{fetchReplies:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m["a"].getReplies(e);case 3:s=a.sent,r=s.data,t.replies=r.reverse(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),b["a"].fire({icon:"error",title:"無法取得回覆，請稍後再試"});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},fetchTweet:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m["a"].getTweetDetail(e);case 3:if(s=a.sent,r=s.data,t.tweet=r,"error"!==r.status){a.next=8;break}throw new Error(r.message);case 8:a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),b["a"].fire({icon:"error",title:"無法取得推文，請稍後再試"});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},handleaddLiked:function(e){var t=e.isLiked;this.tweet.isLiked=t,this.tweet.likeCount+=t?1:-1}})},D=A,N=(a("bc87"),Object(_["a"])(D,s,r,!1,null,"0629c77e",null));t["default"]=N.exports},8059:function(e,t,a){},"8ff9":function(e,t,a){"use strict";a("31d3")},bc87:function(e,t,a){"use strict";a("8059")},e82f:function(e,t,a){"use strict";a("ea73")},ea73:function(e,t,a){}}]);
//# sourceMappingURL=chunk-b3461496.99d444ce.js.map