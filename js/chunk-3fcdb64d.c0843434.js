(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fcdb64d"],{2182:function(t,e,r){"use strict";r("d158")},"51a9":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"follow-tabs d-flex"},t._l(t.tabs,(function(e){return r("li",{key:e.id,staticClass:"tab-item"},[r("router-link",{staticClass:"tab-link",attrs:{to:e.path}},[t._v(" "+t._s(e.title)+" ")])],1)})),0)},n=[],s=r("ec26"),o={data:function(){return{tabs:[{id:Object(s["a"])(),title:"跟隨者",path:{name:"followers",params:{userid:this.$route.params.userid}}},{id:Object(s["a"])(),title:"正在跟隨",path:{name:"followings",params:{userid:this.$route.params.userid}}}]}}},i=o,l=(r("2182"),r("2877")),c=Object(l["a"])(i,a,n,!1,null,"140a6060",null);e["a"]=c.exports},"7db0":function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").find,s=r("44d2"),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),a({target:"Array",proto:!0,forced:i},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},c4f9:function(t,e,r){"use strict";r("ee8a")},d158:function(t,e,r){},e85a:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"user-following"}},[r("div",{staticClass:"navbar"},[r("NavBars")],1),r("div",{staticClass:"following-center"},[r("div",{staticClass:"navtabs"},[r("div",{staticClass:"d-flex align-items-center"},[r("router-link",{staticClass:"leftArrow",attrs:{to:"/users/"+t.user.id}},[r("i",{staticClass:"fas fa-arrow-left arrow"})]),r("div",[r("h3",{staticClass:"navtabs-name"},[t._v(t._s(t.user.name))]),r("span",{staticClass:"navtabs-tweet-count"},[t._v(t._s(t.user.tweetCount)+"推文")])])],1)]),r("div",{staticClass:"follow-tabs"},[r("UserFollowTabs")],1),r("div",{staticClass:"following-list"},[r("ul",{staticClass:"list"},t._l(t.followings,(function(e){return r("li",{key:e.Followship.id,staticClass:"item d-flex"},[r("img",{staticClass:"avatar",attrs:{src:e.avatar}}),r("div",{staticClass:"content"},[r("div",{staticClass:"wrapper d-flex justify-content-between"},[r("div",{staticClass:"info"},[r("p",{staticClass:"name"},[t._v(t._s(e.name))]),r("router-link",{staticClass:"account",attrs:{to:"/users/"+e.followingId}},[t._v(t._s(e.account))])],1),t.currentUser.id!==e.followingId?r("div",{staticClass:"btn-control"},[e.isFollowed?r("button",{staticClass:"btn following-btn",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.unfollow(e.followingId)}}},[t._v(" 正在跟隨 ")]):r("button",{staticClass:"btn follow-btn",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.follow(e.followingId)}}},[t._v(" 跟隨 ")])]):t._e()]),r("p",{staticClass:"introduction"},[t._v(t._s(e.introduction))])])])})),0)])]),r("div",{staticClass:"bar-right"},[r("Popular")],1)])},n=[],s=r("1da1"),o=r("5530"),i=(r("7db0"),r("4de4"),r("96cf"),r("0baf")),l=r("3b8f"),c=r("51a9"),u=r("1602"),f=r("2fa3"),d=r("2f62"),p={components:{NavBars:i["a"],Popular:l["a"],UserFollowTabs:c["a"]},data:function(){return{followings:[],user:{id:-1,account:"",name:"",avatar:"",cover:"",role:"",introduction:"",followerCount:"",followingCount:"",tweetCount:"",isFollowed:!1}}},watch:{isUserReload:function(){this.isUserReload&&(this.handleUserReload(!1),this.currentUser.id===this.user.id&&this.fetchFollowings(this.user.id))}},computed:Object(o["a"])({},Object(d["c"])(["currentUser","isAuthenticated","isUserReload"])),created:function(){var t=this.$route.params.userid;this.fetchFollowings(t),this.fetchUser(t)},beforeRouteUpdate:function(t,e,r){var a=t.params.userid;this.fetchFollowings(a),this.fetchUser(a),r()},methods:Object(o["a"])(Object(o["a"])({},Object(d["b"])(["handleUserReload","handlePopularReload"])),{},{fetchFollowings:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].getUserFollowings({userid:t});case 3:a=r.sent,n=a.data,e.followings=n,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),f["a"].fire({type:"error",title:"無法取得資料，請稍後再試"});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},fetchUser:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].get({userid:t});case 3:a=r.sent,n=a.data,e.user=n,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),f["a"].fire({type:"error",title:"無法取得使用者資料，請稍後再試"});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},follow:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log(t),r.next=4,u["a"].addFollowed({id:t});case 4:if(a=r.sent,n=a.data,"success"===n.status){r.next=8;break}throw new Error(n.message);case 8:f["a"].fire({icon:"success",title:"成功跟隨"}),s=e.followings.find((function(e){return e.followingId===t})),s.isFollowed=!0,e.handlePopularReload(!0),r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](0),console.log(r.t0),f["a"].fire({icon:"error",title:"無法跟隨，請稍後再試"});case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},unfollow:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].deleteFollowed({id:t});case 3:if(a=r.sent,n=a.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:f["a"].fire({icon:"success",title:"成功取消跟隨"}),e.user.id===e.currentUser.id?e.followings=e.followings.filter((function(e){return e.followingId!==t})):(s=e.following.find((function(e){return e.followingId===t})),s.isFollowed=!1),e.handlePopularReload(!0),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](0),console.log(r.t0),f["a"].fire({icon:"error",title:"無法取消跟隨，請稍後再試"});case 16:case"end":return r.stop()}}),r,null,[[0,12]])})))()}})},w=p,v=(r("c4f9"),r("2877")),h=Object(v["a"])(w,a,n,!1,null,"26a9490a",null);e["default"]=h.exports},ec26:function(t,e,r){"use strict";var a,n=new Uint8Array(16);function s(){if(!a&&(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(n)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function i(t){return"string"===typeof t&&o.test(t)}for(var l=i,c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r}var d=f;function p(t,e,r){t=t||{};var a=t.random||(t.rng||s)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){r=r||0;for(var n=0;n<16;++n)e[r+n]=a[n];return e}return d(a)}e["a"]=p},ee8a:function(t,e,r){}}]);
//# sourceMappingURL=chunk-3fcdb64d.c0843434.js.map