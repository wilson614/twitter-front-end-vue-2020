(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d586185"],{"1d97":function(e,t,s){},"384e":function(e,t,s){e.exports=s.p+"img/like_fill.7e3617b7.svg"},"66ed":function(e,t,s){e.exports=s.p+"img/reply.20d8cd6a.svg"},"7db0":function(e,t,s){"use strict";var a=s("23e7"),i=s("b727").find,r=s("44d2"),n="find",c=!0;n in[]&&Array(1)[n]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(n)},8909:function(e,t,s){e.exports=s.p+"img/like.e16b939e.svg"},"8f8e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-tweets-container d-flex justify-content-center"},[a("ul",{staticClass:"user-tweet-list"},e._l(e.tweets,(function(t){return a("li",{key:t.id,staticClass:"tweet-item d-flex"},[a("div",{staticClass:"user-avatar"},[a("img",{staticClass:"avatar",attrs:{src:t.User.avatar}})]),a("div",{staticClass:"user-tweet-main"},[a("div",{staticClass:"user-info"},[a("span",{staticClass:"user name"},[e._v(e._s(t.User.name))]),a("router-link",{staticClass:"user account",attrs:{to:"/users/"+t.UserId}},[e._v(e._s("@"+t.User.account))]),a("span",{staticClass:"seperater"},[e._v("•")]),a("span",{staticClass:"user created-at"},[e._v(e._s(e.isToday(t.createdAt)?e.fromNow(e.utcOffset(t.createdAt)):e.timeFormat(e.utcOffset(t.createdAt),"MM月DD日")))])],1),a("router-link",{attrs:{to:"/tweets/"+t.id}},[a("p",{staticClass:"tweet-content"},[e._v(" "+e._s(t.description)+" ")])]),a("div",{staticClass:"reply-likes d-flex align-items-center"},[a("div",{staticClass:"reply-wrapper d-flex align-items-center cursor-pointer",on:{click:function(s){return e.showtweetReplyModal(t)}}},[a("img",{staticClass:"icon reply-icon",attrs:{src:s("66ed")}}),a("p",{staticClass:"counts reply-counts"},[e._v(e._s(t.replyCount))])]),a("div",{staticClass:"like-wrapper d-flex align-items-center"},[t.isLiked?[a("img",{staticClass:"icon isliked-icon",attrs:{src:s("384e"),disabled:e.isProcessing},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.doLike(t.id,!t.isLiked)}}}),a("p",{staticClass:"counts isliked-counts"},[e._v(e._s(t.likeCount))])]:[a("img",{staticClass:"icon like-icon",attrs:{src:s("8909"),disabled:e.isProcessing},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.doLike(t.id,!t.isLiked)}}}),a("p",{staticClass:"counts like-counts"},[e._v(e._s(t.likeCount))])]],2)])],1)])})),0),0!==Object.keys(e.modalData).length?a("TweetReplyModal",{attrs:{tweet:e.modalData},on:{close:e.modalClose,submit:e.replySubmit}}):e._e()],1)},i=[],r=s("1da1"),n=(s("7db0"),s("b0c0"),s("a4d3"),s("e01a"),s("96cf"),s("2708")),c=s("811a"),o=s("1602"),l=s("6783"),u=s("2fa3"),d={mixins:[n["b"]],components:{TweetReplyModal:c["a"]},data:function(){return{tweets:[],modalData:{},isShowModal:!1,isProcessing:!1}},created:function(){var e=this.$route.params.userid;this.fetchTweets(e)},beforeRouteUpdate:function(e,t,s){var a=e.params.userid;this.fetchTweets(a),s()},methods:{fetchTweets:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,o["a"].getUserTweet({userid:e});case 3:a=s.sent,i=a.data,t.tweets=i,s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),u["a"].fire({type:"error",title:"無法取得使用者資料，請稍後再試"});case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()},doLike:function(e,t){var s=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,r,n,c,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,!s.isProcessing){a.next=3;break}return a.abrupt("return");case 3:if(s.isProcessing=!0,!t){a.next=10;break}return a.next=7,l["a"].likeTweet({tweetId:e});case 7:i=a.sent,a.next=13;break;case 10:return a.next=12,l["a"].unlikeTweet({tweetId:e});case 12:i=a.sent;case 13:if(r=i,n=r.data,"success"===n.status){a.next=16;break}throw new Error(n.message);case 16:c=t?"成功加入最愛":"成功移除最愛",u["a"].fire({icon:"success",title:c}),s.isProcessing=!1,o=s.tweets.find((function(t){return t.id===e})),o.isLiked=t,t?o.likeCount++:o.likeCount--,a.next=29;break;case 24:a.prev=24,a.t0=a["catch"](0),console.log(a.t0),u["a"].fire({icon:"error",title:"無法 加入/移除 最愛"}),s.isProcessing=!1;case 29:case"end":return a.stop()}}),a,null,[[0,24]])})))()},showtweetReplyModal:function(e){this.modalData={name:e.User.name,account:e.User.account,avatar:e.User.avatar,createdAt:e.createdAt,description:e.description,id:e.id}},modalClose:function(){this.modalData={}},replySubmit:function(e){console.log(e),this.modalClose()}}},f=d,p=(s("e0b8"),s("2877")),m=Object(p["a"])(f,a,i,!1,null,"2f2676ae",null);t["default"]=m.exports},e0b8:function(e,t,s){"use strict";s("1d97")}}]);
//# sourceMappingURL=chunk-0d586185.96afd7a7.js.map